<project default="setup" name="rtgovtests" >
	<target name="setup">
		<echo message="Setting up Overlord Runtime Governance modules"/>
	
		<delete dir="${jboss.home}/modules/org/overlord/rtgov" />
		
		<unzip src="${org.overlord.rtgov.release.jbossas:module:zip}"
			dest="${jboss.home}" />

		<echo message="Setting up Overlord Runtime Governance deployments"/>

		<delete dir="${jboss.home}/standalone/deployments/overlord-rtgov" />

		<!-- Copy data source definitions -->
		<copy todir="${jboss.home}/standalone/deployments/overlord-rtgov" >
			<fileset dir="${ant.file.rtgovtests}/../../distribution/src/main/jbossas/deployments/server" />
		</copy>

		<echo message="Setting up Overlord Runtime Governance configuration"/>

		<delete file="${jboss.home}/standalone/configuration/overlord-rtgov.properties" />

		<copy todir="${jboss.home}/standalone/configuration" >
			<fileset file="${ant.file.rtgovtests}/../../distribution/src/main/jbossas/configuration/server/overlord-rtgov.properties" />
		</copy>
	</target>

	<target name="clean">
		<echo message="Cleaning up Overlord Runtime Governance modules"/>
		<delete dir="${jboss.home}/modules/org/overlord/rtgov" />

		<echo message="Cleaning up Overlord Runtime Governance deployments"/>
		<delete dir="${jboss.home}/standalone/deployments/overlord-rtgov" />

		<echo message="Cleaning up Overlord Runtime Governance configuration"/>
		<delete file="${jboss.home}/standalone/configuration/overlord-rtgov.properties" />
	</target>

</project>
