<project default="setup" name="bamtests" >
	<target name="setup">
		<echo message="Setting up BAM modules"/>
	
		<delete dir="${jboss.home}/modules/org/overlord/bam" />
		
		<unzip src="${org.overlord.bam.release.jbossas:module:zip}"
			dest="${jboss.home}" />

		<echo message="Setting up BAM deployments"/>

		<delete dir="${jboss.home}/standalone/deployments/overlord-bam" />

		<!-- Copy data source definitions -->
		<copy todir="${jboss.home}/standalone/deployments/overlord-bam" >
			<fileset dir="${ant.file.bamtests}/../../distribution/src/main/jbossas/deployments/server" />
		</copy>

		<echo message="Setting up BAM configuration"/>

		<delete file="${jboss.home}/standalone/configuration/overlord-bam.properties" />

		<copy todir="${jboss.home}/standalone/configuration" >
			<fileset file="${ant.file.bamtests}/../../distribution/src/main/jbossas/configuration/server/overlord-bam.properties" />
		</copy>
	</target>

	<target name="clean">
		<echo message="Cleaning up BAM modules"/>
		<delete dir="${jboss.home}/modules/org/overlord/bam" />

		<echo message="Cleaning up BAM deployments"/>
		<delete dir="${jboss.home}/standalone/deployments/overlord-bam" />

		<echo message="Cleaning up BAM configuration"/>
		<delete file="${jboss.home}/standalone/configuration/overlord-bam.properties" />
	</target>

</project>
